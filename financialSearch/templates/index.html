{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibration Analysis</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'vibrations/style.css' %}">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <nav class="navbar navbar-light bg-light justify-content-between shadowed">
        <a class="navbar-brand" href=""><img src="{% static 'img/logo.png' %}" height="50px" alt=""></a>
        <a class="btn btn-primary" href="/logout">Logout</a>
    </nav>

    <div class="mainContainer">
        <div class="tools">
            <h2>Consulta de Datos de Yahoo Finance</h2>
            <p>Este aplicativo permite consultar datos financieros históricos de empresas como Apple, Microsoft, y
                otras, desde Yahoo Finance. Proporciona gráficos interactivos con precios de cierre y medias móviles
                para análisis visual.</p>
            <form id="consultaForm" onsubmit="event.preventDefault(); obtenerDatos();">
                <div class="form-group">
                    <label for="from">From:</label>
                    <input type="date" class="form-control" id="from" name="from" required>
                </div>
                <div class="form-group">
                    <label for="to">To:</label>
                    <input type="date" class="form-control" id="to" name="to" required>
                </div>
                <div class="form-group">
                    <label for="brand">Brand:</label>
                    <select class="form-control" id="brand" name="brand" required>
                        <option value="" disabled selected>Selecciona una empresa</option>
                        <option value="AAPL">Apple Inc. (AAPL)</option>
                        <option value="MSFT">Microsoft Corporation (MSFT)</option>
                        <option value="AMZN">Amazon.com, Inc. (AMZN)</option>
                        <option value="GOOGL">Alphabet Inc. (GOOGL)</option>
                        <option value="META">Meta Platforms, Inc. (META)</option>
                        <option value="TSLA">Tesla, Inc. (TSLA)</option>
                        <option value="BRK.B">Berkshire Hathaway Inc. (BRK.B)</option>
                        <option value="NVDA">NVIDIA Corporation (NVDA)</option>
                        <option value="V">Visa Inc. (V)</option>
                        <option value="WMT">Walmart Inc. (WMT)</option>
                        <option value="KO">The Coca-Cola Company (KO)</option>
                        <option value="JNJ">Johnson & Johnson (JNJ)</option>
                        <option value="PG">Procter & Gamble Co. (PG)</option>
                        <option value="MCD">McDonald's Corporation (MCD)</option>
                        <option value="PYPL">PayPal Holdings, Inc. (PYPL)</option>
                        <option value="CRM">Salesforce.com, Inc. (CRM)</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Search</button>
            </form>
        </div>

        <div class="graph">
            <div id="afterText">
                <h4>Información financiera histórica de <span id="brandId"></span></h4>
            </div>
            <div id="beforeText" class="text-before">
                <h4>Realice una búsqueda para iniciar</h4>
            </div>

            <!-- Sección de Introducción -->
            <div id="analysisIntro" class="analysis-section">
                <h5>Análisis Predictivo Financiero</h5>
                <p>El análisis predictivo financiero es una herramienta clave para apoyar la toma de decisiones de inversión, 
                    ya que permite evaluar si es conveniente comprar o vender acciones en un momento determinado. 
                    Este tipo de análisis se basa principalmente en el estudio de los precios históricos de cierre 
                    y el uso de indicadores técnicos que ayudan a identificar patrones, 
                    tendencias y niveles de riesgo en el comportamiento de un activo.
                
                    Al analizar estos datos de manera sistemática, se busca anticipar posibles movimientos futuros del mercado, 
                    lo que permite a los inversionistas tomar decisiones más informadas, 
                    reducir la incertidumbre y optimizar sus estrategias. 
                    En el contexto académico, este enfoque representa una forma práctica de aplicar modelos 
                    cuantitativos al mundo real, combinando teoría financiera con herramientas de análisis de datos 
                    para comprender mejor cómo se comportan los mercados.</p>
            </div>

            <!-- Sección de Gráficos -->
            <div id="analysisCharts" class="analysis-section">
                <h5>Gráficos de Análisis Técnico</h5>
                <div class="charts-container">
                    <!-- Fila 1: Gráfico principal grande -->
                    <div class="chart-row">
                        <div class="chart-wrapper chart-full">
                            <h6>Precio de Cierre y Media Móvil Simple (SMA_5)</h6>
                            <canvas id="chart" class="chart-xlarge"></canvas>
                        </div>
                    </div>
                    <!-- Fila 2: Gráfico de variaciones diarias grande -->
                    <div class="chart-row">
                        <div class="chart-wrapper chart-full">
                            <h6>Variaciones Diarias del Precio</h6>
                            <canvas id="diffChart" class="chart-xlarge"></canvas>
                        </div>
                    </div>
                    <!-- Fila 3: Dos gráficos pequeños juntos -->
                    <div class="chart-row chart-row-half">
                        <div class="chart-wrapper chart-half">
                            <h6>Evolución de la Media Móvil Simple</h6>
                            <canvas id="smaChart" class="chart-small"></canvas>
                            <p>
                                Esta gráfica muestra cómo ha evolucionado el promedio simple del precio de los últimos 5 días de los precios (SMA_5). 
                                El área sombreada bajo la línea morada ayuda a visualizar la tendencia del precio a lo largo del tiempo.
                            </p>
                        </div>
                        <div class="chart-wrapper chart-half">
                            <h6>Comparación SMA vs EMA</h6>
                            <canvas id="emaChart" class="chart-small"></canvas>
                            <p>
                                Esta gráfica muestra la SMA_5 (línea naranja), promedio simple de los últimos 5 días, y la EMA_5 (línea azul), promedio exponencial que prioriza precios recientes.
                                Ambas trazan la tendencia de los precios de cierre a lo largo del tiempo.
                                Los cruces entre ellas pueden indicar señales de compra (SMA_5 sobre EMA_5) o venta (EMA_5 sobre SMA_5).
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección de Conclusiones -->
            <div id="analysisResult" class="analysis-section">
                <h5>Conclusiones del Análisis</h5>
                <div id="analysisResultText" class="conclusion-text"></div>
            </div>
        </div>
    </div>

    <script src="{% static 'vibrations/graph.js' %}"></script>


</body>

</html>